<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Jul 29, 2012
 | Rendered using Apache Maven Fluido Skin 1.2.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link rel="stylesheet" href="./css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido.min.js"></script>

    
    <meta name="Date-Revision-yyyymmdd" content="20120729" />
    <meta http-equiv="Content-Language" content="en" />
    
        </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/nano-project/h-ubu">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 100;"
        src="https://a248.e.akamai.net/assets.github.com/img/7afbc8b248c68eb468279e8c17986ad46549fb71/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://arrow-group.eu" id="bannerLeft">
                                                                                        <img src="http://www.arrow-group.eu/templates/default/medias/arrowgroup.gif"  alt="H-Ubu - simplify JavaScript Architecture"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2012-07-29</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.0.1-SNAPSHOT</li>
                      
                
            
      
                  </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                                    <h3>h-ubu</h3>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="motivations.html" title="Motivations and Concepts">Motivations and Concepts</a>
            </li>
                  <li class="none">
                          <a href="quickstart.html" title="Quickstart">Quickstart</a>
            </li>
          </ul>
                        <h3>User Guide</h3>
                  <ul>
                  <li class="none">
                          <a href="creating-and-registering-components.html" title="Creating and Registering Components">Creating and Registering Components</a>
            </li>
                  <li class="none">
                          <a href="providing-services.html" title="Providing Services">Providing Services</a>
            </li>
                  <li class="none">
                          <a href="requiring-services.html" title="Requiring Services">Requiring Services</a>
            </li>
                  <li class="none">
                          <a href="direct-injection.html" title="Direct Injection">Direct Injection</a>
            </li>
                  <li class="none">
                          <a href="receiving-and-sending-events.html" title="Receiving and Sending Events">Receiving and Sending Events</a>
            </li>
                  <li class="none">
                          <a href="testing-components.html" title="Testing Components">Testing Components</a>
            </li>
          </ul>
                        <h3>Advanced Topics</h3>
                  <ul>
                  <li class="none">
                          <a href="using-requirejs.html" title="Using require.js">Using require.js</a>
            </li>
                  <li class="none">
                          <a href="using-nodejs.html" title="Using h-ubu in node.js">Using h-ubu in node.js</a>
            </li>
                  <li class="none">
                          <a href="contract.html" title="Contract and Conformity">Contract and Conformity</a>
            </li>
                  <li class="none">
                          <a href="service-orientation.html" title="Service-Orientation">Service-Orientation</a>
            </li>
                  <li class="none">
                          <a href="developper-guide.html" title="Developer Guide">Developer Guide</a>
            </li>
          </ul>
                        <h3>Project Documentation</h3>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                      
            
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="$sitesearchValue" name="sitesearch" type="hidden"/>
  <input class="span2 search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://github.com/nano-project/h-ubu" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Service-Oriented Components</h1>

<p>This page explains how to make h-ubu components <code>service component</code>, i.e. component requiring and providing services
allowing loose-coupled dynamic bindings.</p>

<h2>Concepts</h2>

<p>Using service components has several benefits. With such orientation, components does interacts together only using
<em>service specification</em> (<code>contract</code>) making service provider subtituable. The binding is dynamic and so you can
switch providers at runtime.</p>

<p>However, manual development of service-oriented components is error-prone and complex. So H-UBU provides an extension
 dealing with most of the concerns and so let you focus on the component logic only. As an example,
 required services are injected automatically within methods or members of the component,
 while service publication is also automated.</p>

<h2>Description</h2>

<p>The component needs to describe itself to tell H-UBU what are the required services and provided service. This
description is made using a API, either by an external tiers or by the component itself. In this latter case,
we recommend implementing the description within the <code>configure</code> method.</p>

<h2>Requiring Services</h2>

<p>To require a service and to receive the service object automatically, you need to describe a service dependency
specifying the required contract, the service filter, how the service object(s) is/are injected and so on.</p>

<pre><code>hub.requireService({
    component: cmp,
    contract : contract
    filter : function(ref) {
        ref.getProperty("lg") === "fr";
        }
    field : "mysvc"
});
</code></pre>

<p>This instructs h-ubu to inject the service <code>contract</code> with the property <code>lg</code> set to <code>fr</code> into the filed <code>mysvc</code> of
the component (<code>cmp</code>). This dependency is (by default) mandatory and scalar (only one service injected).</p>

<p>A component can directly declare the same dependency in his <code>configure</code> method:</p>

<pre><code>configure : function(hub, conf) {
    hub.requireService({
        component: cmp,
        contract : contract
        filter : function(ref) {
            ref.getProperty("lg") === "fr";
            }
        field : "mysvc"
    });
}
</code></pre>

<p>Dependencies can be:</p>

<ul>
<li><em>scalar</em> or <em>aggregate</em> : Aggregate dependencies are bound to all matching services.</li>
<li><em>mandatory</em> or <em>optional</em>: Once unresolved, mandatory dependencies instructs H-UBU to unregisters all the published
services provided by the same instance until the dependency is resolved again.</li>
</ul>

<p>Dependencies can be inject withing fields or using <em>bind/unbind</em> methods. Field injection is the easiest,
as H-UBU injects the service within the given field. For aggregate dependencies the array is populated with the
matching services:</p>

<pre><code>var component = {
    services = [],
    service = null,

    configure : function(hub) {
        this.hub = hub;
        // Scalar dependency
        this.hub.requireService({
            component: this,
            contract: contract,
            field: "service"

        });

        // Aggregate dependency
        this.hub.requireService({
            component: this,
            contract: contract,
            aggregate : true,
            field: "services"
        });
    },

    //...

    doSomething : function() {
         var i = 0;
         service.doSomethingWithTheService();
         for (; i &lt; services.length; i++) {
            services[i].doSomethingWithTheService();
         }
    }
};
</code></pre>

<p>Using bind and unbind methods let you be notified when a new service is arriving and when a service is leaving:</p>

<pre><code>var component = {
        services = [],
        service = null,

        configure : function(hub) {
            this.hub = hub;
            // Scalar dependency
            this.hub.requireService({
                component: this,
                contract: contract,
                bind: component.bind,
                unbind: component.unbind
            });
        },

        bind : function (svc) {
            this.service = svc;
        },

        unbind : function (svc) {
            if (this.service === svc) {
                this.service = null
            }
        },


        //...

        doSomething : function() {
             service.doSomethingWithTheService();
        }
    };
</code></pre>

<p>Bind and Unbind method receives the service object and as second argument the service reference.</p>

<h2>Publishing Services</h2>

<h2>Dynamism</h2>

<h2>Modifying published services</h2>

                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span16">Copyright &copy;                    2010-2012
                        <a href="http://www.arrow-group.eu/">Arrow-Group</a>.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
